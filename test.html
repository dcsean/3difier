<html>
	<head>
		<script src="jquery-1.5.1.js"></script>
		<script type="text/javascript">
			jQuery(document).ready(function(){
			   $("canvas").mousemove(function(e){
					var mouseX = e.pageX - this.offsetLeft - 300;
					var mouseY = e.pageY - this.offsetTop - 100;
			      	//$('#status').html(mouseX +', '+ mouseY); // debugging
					move(mouseX, mouseY);
			   }); 
			})
			
			function display_object(x, y, depth, color) {
				//this.name = name;
				this.x = x;
				this.y = y;
				this.depth = depth;
				this.color = color;
				
				this.getX = function() {
					return this.x;
				}
				
				this.getY = function() {
					return this.y;
				}
				
				this.getDepth = function() {
					return this.depth;
				}
			}
			
			close_box = new Object();
			close_box.x = 50;
			close_box.y = 130;
			close_box.depth = 10;
			
			front_box = new Object();
			front_box.x = 300;
			front_box.y = 100;
			front_box.depth = 50;
			
			far_box = new Object();
			far_box.x = 200;
			far_box.y = 50;
			far_box.depth = 100;
			
			var box = new display_object(10,20,30,40);
			
			$('#status').html(box.getX);
			
			var display_objects = [ new display_object(10,20,30,40) ];
			
		
			function init() {
				move(0,0);
				$('#status').html(display_objects[0].getX);
			}
			
			function move(x,y) {
				var canvas = document.getElementById('tutorial');
				var ctx = canvas.getContext('2d');
				
				var oppX = -x;
				var oppY = -y;
				
				ctx.clearRect(0,0,600,200);
				ctx.fillStyle = "rgb(200,0,0)";
				ctx.fillRect (close_box.x + (oppX / close_box.depth), close_box.y + (oppY / close_box.depth), 55, 50);
				
				ctx.fillStyle = "rgb(0,200,0)";
				ctx.fillRect (front_box.x + (oppX / front_box.depth), front_box.y + (oppY / front_box.depth), 55, 50);

				ctx.fillStyle = "rgb(0,200,0)";
				ctx.fillRect (far_box.x + (oppX / far_box.depth), far_box.y + (oppY / far_box.depth), 55, 50);

				$('#status').html(oppX +', '+ oppY);
				
				for(var i=0; i<display_objects.length;i++){
					var x = display_objects[i].getX;
					var y = display_objects[i].getY;
					var depth = display_objects[i].getDepth;
					
					
					ctx.fillStyle = "rgb(200,0,0)";
					ctx.fillRect (x + (oppX / depth), y + (oppY / depth), 55, 50);
				}
				
			}
		</script>
	</head>
	<body onload="init();">
		<canvas id="tutorial" width="600" height="200" style="border: 3px solid black;">Image</canvas>
		<h2 id="status">
			0, 0
		</h2>
	</body>
</html>
		